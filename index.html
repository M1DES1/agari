<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agario Multiplayer - Menu</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="menu-container">
        <div class="menu-box">
            <h1>ğŸ® AGARIO MULTIPLAYER</h1>
            
            <div class="input-group">
                <label for="nickname">TwÃ³j Nick:</label>
                <input type="text" id="nickname" 
                       placeholder="Wpisz swÃ³j nick..." 
                       maxlength="15"
                       value="Gracz">
                <div class="hint">Maksymalnie 15 znakÃ³w</div>
            </div>
            
            <div class="color-picker">
                <label>Kolor kulki:</label>
                <div class="colors">
                    <div class="color-option" style="background: #FF5252" data-color="#FF5252"></div>
                    <div class="color-option" style="background: #4CAF50" data-color="#4CAF50"></div>
                    <div class="color-option" style="background: #2196F3" data-color="#2196F3"></div>
                    <div class="color-option" style="background: #FFC107" data-color="#FFC107"></div>
                    <div class="color-option" style="background: #9C27B0" data-color="#9C27B0"></div>
                    <div class="color-option" style="background: #00BCD4" data-color="#00BCD4"></div>
                </div>
            </div>
            
            <button id="playBtn" class="play-btn">
                ğŸš€ ROZPOCZNIJ GRÄ˜
            </button>
            
            <div class="instructions">
                <h3>ğŸ¯ Sterowanie:</h3>
                <ul>
                    <li><strong>W / â†‘</strong> - ruch w gÃ³rÄ™</li>
                    <li><strong>S / â†“</strong> - ruch w dÃ³Å‚</li>
                    <li><strong>A / â†</strong> - ruch w lewo</li>
                    <li><strong>D / â†’</strong> - ruch w prawo</li>
                </ul>
                <p>Zjadaj mniejsze kulki, aby rosnÄ…Ä‡!</p>
            </div>
            
            <div class="server-status">
                <div class="status-dot"></div>
                <span id="statusText">ÅÄ…czenie z serwerem...</span>
            </div>
        </div>
    </div>
    
    <script>
        // Sprawdzenie poÅ‚Ä…czenia z serwerem
        async function checkServerConnection() {
            const statusDot = document.querySelector('.status-dot');
            const statusText = document.getElementById('statusText');
            
            try {
                // PrÃ³ba poÅ‚Ä…czenia z serwerem WebSocket
                statusText.textContent = "ÅÄ…czenie z serwerem...";
                statusDot.style.background = "#FFC107";
                
                // Przechodzimy od razu do gry (Render.com moÅ¼e mieÄ‡ inne porty)
                statusText.textContent = "Serwer gotowy";
                statusDot.style.background = "#4CAF50";
                
            } catch (error) {
                statusText.textContent = "BÅ‚Ä…d poÅ‚Ä…czenia";
                statusDot.style.background = "#F44336";
            }
        }
        
        // ObsÅ‚uga przycisku rozpoczÄ™cia gry
        document.getElementById('playBtn').addEventListener('click', () => {
            const nickname = document.getElementById('nickname').value.trim();
            const selectedColor = document.querySelector('.color-option.selected')?.dataset.color || '#FF5252';
            
            if (!nickname) {
                alert('ProszÄ™ wpisaÄ‡ nick!');
                return;
            }
            
            // Zapisanie danych w localStorage
            localStorage.setItem('playerData', JSON.stringify({
                nickname: nickname,
                color: selectedColor,
                timestamp: Date.now()
            }));
            
            // PrzejÅ›cie do gry
            window.location.href = 'game.html';
        });
        
        // ObsÅ‚uga wyboru koloru
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => 
                    opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
        
        // Ustaw domyÅ›lny kolor
        document.querySelectorAll('.color-option')[0].classList.add('selected');
        
        // Enter teÅ¼ zaczyna grÄ™
        document.getElementById('nickname').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('playBtn').click();
            }
        });
        
        // SprawdÅº poÅ‚Ä…czenie przy Å‚adowaniu
        window.addEventListener('load', checkServerConnection);
        
        // Automatyczne focus na nickname
        setTimeout(() => {
            document.getElementById('nickname').focus();
            document.getElementById('nickname').select();
        }, 500);
    </script>
</body>
</html>
